#!/bin/bash

_display_manager() {

    # Install Display Manager
    _info "Installing ${display_man}"
    install_display="_${display_man}"
    _chroot "pacman --noconfirm -S ${!install_display}; "
    _chroot "systemctl enable ${display_man}"

    # GDM
    if [[ ${display_man} == "gdm" ]]; then
        wget ${_url}/conf/xprofile
        mv xprofile /mnt/etc/xprofile

    # LIGHTDM
    elif [[ ${display_man} == "lightdm" ]]; then
        default-session="#greeter-session=example-gtk-gnome"
        session="greeter-session=lightdm-deepin-greeter"
        numlock="greeter-setup-script=/usr/bin/numlockx on"
        sed -i -e "s|${default-session}|${session}|g" \
        /mnt/etc/lightdm/lightdm.conf
        sed -i -e "s|#greeter-setup-script=|${numlock}|g" \
        /mnt/etc/lightdm/lightdm.conf

    # SDDM
    elif [[ ${display_man} == "sddm" ]]; then
        sed -i -e "s/Numlock=none/Numlock=on/g" /mnt/etc/sddm.conf

    # LXDM
    elif [[ ${display_man} == "lxdm" ]]; then
        default-session="# session=/usr/bin/startlxde"

        # Cinnamon / Mate
        if [[ ${desktop} == "cinnamon" || ${desktop} == "mate" ]]; then
            session="session=/usr/bin/${desktop}-session"

        # Enlightenment
        elif [[ ${desktop} == "enlightenment" ]]; then
            session="session=/usr/bin/enlightenment_start"

        # Budgie
        elif [[ ${desktop} == "budgie" ]]; then
            session="session=/usr/bin/budgie-desktop"

        # Xfce / Lxde / Lxqt
        else
            session="session=/usr/bin/start${desktop}"
        fi

        # Configure settings
        sed -i -e "s|${default-session}|${session}|g" /mnt/etc/lxdm/lxdm.conf
        sed -i -e "s/# numlock=0/numlock=1/g" /mnt/etc/lxdm/lxdm.conf
        sed -i -e "s/white=/white=${USER_name}/g" /mnt/etc/lxdm/lxdm.conf
        sed -i -e "s/black=/black=root/g" /mnt/etc/lxdm/lxdm.conf

    # XDM
    elif [[ ${display_man} == "xdm" ]]; then

    fi
}
