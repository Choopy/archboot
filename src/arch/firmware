#!/bin/bash

#                        FIRMWARE DETECTION
# ============================================================================
# Here we detect if system is running on UEFI or BIOS firmware to properly
# set partition order, type, table, filesystem and to stored them.
# ============================================================================

_firmware() {

    _info "Firmware detection"

    # UEFI Firmware
    if [ -d /sys/firmware/efi/efivars ]; then
        export FIRMWARE="UEFI"
        export part_table="GPT"
        export part_code="g"
        export part_type=""
        export boot_filesystem="fat -F32"
        _note "UEFI firmware detected!"

    # BIOS Firmware
    else
        FIRMWARE="BIOS"
        export part_table="MBR"
        export part_code="o"
        export part_type="p\n"
        export boot_filesystem="ext4"
        _note "BIOS firmware detected!"
    fi
}

# archboot by grm34 under Apache License 2.0
# ============================================================================
